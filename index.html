<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¥ã®æ‰‹ åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2C3E50 0%, #34495E 50%, #3A506B 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        /* ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .login-container {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            animation: fadeIn 0.5s ease-in-out;
        }
        
        .login-header {
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        
        .login-header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .login-form {
            padding: 40px 30px;
        }
        
        .login-form-group {
            margin-bottom: 25px;
        }
        
        .login-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #495057;
        }
        
        .login-form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .login-form-group input:focus {
            outline: none;
            border-color: #FF6B35;
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }
        
        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
            display: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .shake {
            animation: shake 0.5s ease-in-out;
        }
        
        /* ãƒ¡ã‚¤ãƒ³ç”»é¢ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆæ—¢å­˜ã®ã‚‚ã®ã‚’ãã®ã¾ã¾ä½¿ç”¨ï¼‰ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: #f8f9fa;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #FF6B35;
        }
        
        .controls {
            padding: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
            background: #fff;
            border-bottom: 1px solid #eee;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #FF6B35, #F7931E);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #FF6B6B, #ee5a52);
            color: white;
        }
        
        .search-box {
            flex: 1;
            min-width: 250px;
            padding: 12px 20px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .search-box:focus {
            outline: none;
            border-color: #FF6B35;
        }
        
        .table-container {
            padding: 30px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        th {
            background: linear-gradient(45deg, #2C3E50, #34495E);
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: bold;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        td {
            padding: 15px 12px;
            border-bottom: 1px solid #f1f3f4;
            transition: background-color 0.3s ease;
        }
        
        tr:hover td {
            background-color: #fafafa;
        }
        
        .expired {
            color: #dc3545 !important;
            font-weight: bold;
            background-color: #fff5f5 !important;
        }
        
        .warning {
            color: #fd7e14 !important;
            font-weight: bold;
        }
        
        .countdown {
            color: #dc3545 !important;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .status-refrigerated {
            background: #E8F5E8;
            color: #2E7D32;
        }
        
        .status-room {
            background: #FFF3E0;
            color: #F57C00;
        }
        
        .add-form {
            background: #f8f9fa;
            padding: 30px;
            border-top: 1px solid #eee;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 8px;
            font-weight: bold;
            color: #495057;
        }
        
        .form-group input,
        .form-group select {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #FF6B35;
        }
        
        .auto-field {
            background-color: #f8f9fa !important;
            color: #495057;
        }
        
        .form-group input:required:invalid,
        .form-group select:required:invalid {
            border-color: #dc3545;
        }
        
        .form-group input:required:valid,
        .form-group select:required:valid {
            border-color: #28a745;
        }
        
        .action-btn {
            font-size: 12px;
            padding: 6px 12px;
            margin: 0 2px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            color: white;
        }
        
        .edit-btn {
            background: #34495E;
        }
        
        .delete-btn {
            background: #E74C3C;
        }
        
        .hidden {
            display: none !important;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            
            .logout-btn {
                position: static;
                margin-top: 15px;
                display: block;
                width: fit-content;
                margin-left: auto;
                margin-right: auto;
            }
            
            .controls {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                min-width: auto;
            }
            
            table {
                font-size: 14px;
            }
            
            th, td {
                padding: 10px 8px;
            }
        }
    </style>
</head>
<body>
    <!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
    <div id="loginScreen" class="login-container">
        <div class="login-header">
            <h1>ğŸ”¥ ç¥ã®æ‰‹</h1>
            <p>åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
        </div>
        <div class="login-form">
            <div class="error-message" id="errorMessage">
                ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“
            </div>
            <form onsubmit="handleLogin(event)">
                <div class="login-form-group">
                    <label for="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                    <input type="password" id="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required>
                </div>
                <button type="submit" class="login-btn">ãƒ­ã‚°ã‚¤ãƒ³</button>
            </form>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ç”»é¢ -->
    <div id="mainScreen" class="container hidden">
        <div class="header">
            <button class="logout-btn" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
            <h1>ğŸ”¥ ç¥ã®æ‰‹ åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>
            <p>å»ƒæ£„ãƒ­ã‚¹å‰Šæ¸›ãƒ»åŠ¹ç‡çš„ãªåœ¨åº«ç®¡ç†ã§åˆ©ç›Šã‚¢ãƒƒãƒ—ï¼</p>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalItems">0</div>
                <div>ç·åœ¨åº«æ•°</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="expiredItems">0</div>
                <div>æœŸé™åˆ‡ã‚Œ</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="urgentItems">0</div>
                <div>24æ™‚é–“ä»¥å†…</div>
            </div>
            <div class="stat-card" style="background: linear-gradient(45deg, #28a745, #20c997); color: white; cursor: pointer;" onclick="showScheduleModal()">
                <div style="font-size: 1.5em;">ğŸ“…</div>
                <div>ä»•è¾¼ã¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</div>
            </div>
        </div>
        
        <div class="controls">
            <input type="text" class="search-box" id="searchBox" placeholder="ğŸ” é£Ÿæåã§æ¤œç´¢...">
            <select id="sortOptions" onchange="renderTable()" style="padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 14px;">
                <option value="default">ä¸¦ã³é †ã‚’é¸æŠ</option>
                <option value="prepDate">å…¥è·ã€ä»•è¾¼ã¿æ—¥é †</option>
                <option value="expiryDate">æœŸé™ãŒçŸ­ã„é †</option>
            </select>
            <button class="btn btn-primary" onclick="showAddForm()">â• æ–°è¦è¿½åŠ </button>
            <button class="btn btn-success" onclick="exportToCSV()">ğŸ“¥ CSVå‡ºåŠ›</button>
            <button class="btn btn-danger" onclick="clearExpired()">ğŸ—‘ï¸ æœŸé™åˆ‡ã‚Œå‰Šé™¤</button>
            <button class="btn" onclick="showRestoreModal()" style="background: #6f42c1; color: white;">â™»ï¸ å‰Šé™¤ãƒ‡ãƒ¼ã‚¿å¾©å…ƒ</button>
        </div>
        
        <div class="table-container">
            <table id="inventoryTable">
                <thead>
                    <tr>
                        <th>é£Ÿæå</th>
                        <th>æ•°é‡</th>
                        <th>å…¥è·ã€ä»•è¾¼ã¿æ—¥æ™‚</th>
                        <th>è³å‘³æœŸé™</th>
                        <th>ä¿å­˜æ–¹æ³•</th>
                        <th>ä¿å­˜å ´æ‰€</th>
                        <th>æ‹…å½“è€…</th>
                        <th>å‚™è€ƒ</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody id="inventoryBody">
                </tbody>
            </table>
        </div>
        
        <div class="add-form" id="addForm" style="display: none;">
            <h3>ğŸ†• æ–°ã—ã„é£Ÿæã‚’è¿½åŠ </h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>é£Ÿæå <span style="color: #dc3545; font-weight: bold;">*</span></label>
                    <select id="itemName" onchange="calculateExpiry()" required>
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <optgroup label="é‡èœé¡">
                            <option value="ã‚‚ã‚„ã—">ã‚‚ã‚„ã—</option>
                            <option value="ãƒ¬ã‚¿ã‚¹">ãƒ¬ã‚¿ã‚¹</option>
                            <option value="ã‚­ãƒ£ãƒ™ãƒ„">ã‚­ãƒ£ãƒ™ãƒ„</option>
                        </optgroup>
                        <optgroup label="ãƒ©ãƒ¼ãƒ¡ãƒ³">
                            <option value="å‘³å™Œã‚¹ãƒ¼ãƒ—">å‘³å™Œã‚¹ãƒ¼ãƒ—</option>
                        </optgroup>
                        <optgroup label="ãŠã¤ã¾ã¿ã€é‰„æ¿">
                            <option value="è±šã‚¿ãƒ³">è±šã‚¿ãƒ³</option>
                            <option value="ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼">ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼</option>
                            <option value="ç…®åµï¼ˆæ‚ªé­”ã®å‘³ç‰ï¼‰">ç…®åµï¼ˆæ‚ªé­”ã®å‘³ç‰ï¼‰</option>
                            <option value="ç„¼ããã°éººï¼ˆå‘³ä»˜ãï¼‰">ç„¼ããã°éººï¼ˆå‘³ä»˜ãï¼‰</option>
                            <option value="ãƒãƒ£ãƒ¼ãƒãƒ³">ãƒãƒ£ãƒ¼ãƒãƒ³</option>
                            <option value="é¤ƒå­ï¼ˆé‰„æ¿ç„¼ãé¤ƒå­ï¼‰">é¤ƒå­ï¼ˆé‰„æ¿ç„¼ãé¤ƒå­ï¼‰</option>
                            <option value="ã‚¬ãƒ¼ãƒªãƒƒã‚¯ã‚·ãƒ¥ãƒªãƒ³ãƒ—">ã‚¬ãƒ¼ãƒªãƒƒã‚¯ã‚·ãƒ¥ãƒªãƒ³ãƒ—</option>
                            <option value="ã‚¤ã‚¤ãƒ€ã‚³">ã‚¤ã‚¤ãƒ€ã‚³</option>
                            <option value="ã‚µãƒ©ãƒ€ç”¨é‡èœ">ã‚µãƒ©ãƒ€ç”¨é‡èœ</option>
                            <option value="ãƒãƒ†ãƒˆã‚µãƒ©ãƒ€">ãƒãƒ†ãƒˆã‚µãƒ©ãƒ€</option>
                            <option value="ã‚‚ã‚„ã—ãƒŠãƒ ãƒ«">ã‚‚ã‚„ã—ãƒŠãƒ ãƒ«</option>
                            <option value="ç‰ã“ã‚“é…¢å‘³å™Œ">ç‰ã“ã‚“é…¢å‘³å™Œ</option>
                            <option value="ãƒ”ãƒªè¾›ãƒ¡ãƒ³ãƒ">ãƒ”ãƒªè¾›ãƒ¡ãƒ³ãƒ</option>
                            <option value="æ¢…ã‚¯ãƒ©ã‚²">æ¢…ã‚¯ãƒ©ã‚²</option>
                            <option value="ãã‚‰ã’åˆºã—">ãã‚‰ã’åˆºã—</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label>æ•°é‡ <span style="color: #dc3545; font-weight: bold;">*</span></label>
                    <input type="text" id="quantity" placeholder="ä¾‹ï¼š1000g ã¾ãŸã¯ 5å€‹" required>
                </div>
                <div class="form-group">
                    <label>å…¥è·ã€ä»•è¾¼ã¿æ—¥æ™‚</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="datetime-local" id="prepDate" onchange="calculateExpiry()">
                        <button type="button" class="btn btn-primary" onclick="setCurrentTime()" style="white-space: nowrap; font-size: 12px; padding: 8px 16px;">ç¾åœ¨ã®æ™‚åˆ»</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>è³å‘³æœŸé™</label>
                    <input type="datetime-local" id="expiryDate" class="auto-field">
                </div>
                <div class="form-group">
                    <label>ä¿å­˜æ–¹æ³•</label>
                    <select id="storageType">
                        <option value="å†·è”µ">å†·è”µ</option>
                        <option value="å¸¸æ¸©">å¸¸æ¸©</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ä¿å­˜å ´æ‰€</label>
                    <select id="location">
                        <option value="å†·è”µåº«1">å†·è”µåº«1</option>
                        <option value="å†·è”µåº«2">å†·è”µåº«2</option>
                        <option value="å†·è”µåº«3">å†·è”µåº«3</option>
                        <option value="å†·è”µåº«4">å†·è”µåº«4</option>
                        <option value="å†·è”µåº«5(ãƒ›ãƒ¼ãƒ«)">å†·è”µåº«5(ãƒ›ãƒ¼ãƒ«)</option>
                        <option value="å†·è”µåº«ï¼ˆå€‰åº«ï¼‰">å†·è”µåº«ï¼ˆå€‰åº«ï¼‰</option>
                        <option value="å¸¸æ¸©ä¿ç®¡">å¸¸æ¸©ä¿ç®¡</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>æ‹…å½“è€… <span style="color: #dc3545; font-weight: bold;">*</span></label>
                    <select id="staff" required>
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="å¾Œè—¤">å¾Œè—¤</option>
                        <option value="ç«å±±">ç«å±±</option>
                        <option value="åŸ">åŸ</option>
                        <option value="æŠ¼å°¾">æŠ¼å°¾</option>
                        <option value="ç¶¾æ¨¹">ç¶¾æ¨¹</option>
                        <option value="é›…å¼¥">é›…å¼¥</option>
                        <option value="ã•ãã‚‰">ã•ãã‚‰</option>
                        <option value="ç¶¾å¥ˆ">ç¶¾å¥ˆ</option>
                        <option value="æ™´å–œ">æ™´å–œ</option>
                        <option value="æ¨¹">æ¨¹</option>
                        <option value="ç¾æµ·">ç¾æµ·</option>
                        <option value="ã¯ã‚‹ã‹">ã¯ã‚‹ã‹</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>å‚™è€ƒ</label>
                    <input type="text" id="notes" placeholder="ä¾‹ï¼šè¦æ³¨æ„ã€è§£å‡æ¸ˆã¿ãªã©">
                </div>
            </div>
            <button class="btn btn-success" id="submitBtn" onclick="addItem()">âœ… è¿½åŠ </button>
            <button class="btn" onclick="hideAddForm()" style="background: #6c757d; color: white; margin-left: 10px;">âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        </div>
    </div>

    <!-- ä»•è¾¼ã¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="scheduleModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; border-radius: 15px; padding: 30px; max-width: 900px; width: 95%; max-height: 90%; overflow-y: auto;">
            <h2 style="color: #28a745; margin-bottom: 20px;">ğŸ“… ä»•è¾¼ã¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†</h2>
            
            <!-- å•†å“ãƒã‚¹ã‚¿ãƒ¼ç®¡ç† -->
            <div style="background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 20px;">
                <h3 style="color: #495057; margin-bottom: 15px;">ğŸ› ï¸ å•†å“ãƒã‚¹ã‚¿ãƒ¼è¨­å®š</h3>
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 10px; align-items: center; margin-bottom: 10px;">
                    <input type="text" id="newProductName" placeholder="å•†å“åã‚’å…¥åŠ›" style="padding: 10px; border: 2px solid #e9ecef; border-radius: 6px;">
                    <input type="number" id="newProductHours" placeholder="æ¶ˆè²»æœŸé™(h)" min="1" max="168" style="padding: 10px; border: 2px solid #e9ecef; border-radius: 6px;">
                    <input type="number" id="newProductServings" placeholder="äººæ•°" min="1" max="100" style="padding: 10px; border: 2px solid #e9ecef; border-radius: 6px;">
                    <button onclick="addOrUpdateProductMaster()" id="productMasterBtn" style="padding: 10px 15px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">è¿½åŠ </button>
                </div>
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <button onclick="cancelProductEdit()" id="cancelEditBtn" style="display: none; padding: 8px 12px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button onclick="showDeletedProducts()" style="padding: 8px 12px; background: #17a2b8; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 12px;">â™»ï¸ å‰Šé™¤æ¸ˆã¿å¾©å…ƒ</button>
                </div>
                <div id="productMasterList" style="max-height: 200px; overflow-y: auto;"></div>
            </div>

            <!-- ç¾åœ¨ã®ä»•è¾¼ã¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« -->
            <div style="background: #fff3cd; border-radius: 10px; padding: 20px; margin-bottom: 20px;">
                <h3 style="color: #856404; margin-bottom: 15px;">â° ãã‚ãã‚ä»•è¾¼ã‚€ãƒªã‚¹ãƒˆ</h3>
                <div id="upcomingSchedule"></div>
            </div>

            <!-- å…¨ä½“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ« -->
            <div style="background: #e7f3ff; border-radius: 10px; padding: 20px;">
                <h3 style="color: #004085; margin-bottom: 15px;">ğŸ“‹ ä»•è¾¼ã¿äºˆå®šä¸€è¦§</h3>
                <div id="fullSchedule"></div>
            </div>

            <button class="btn btn-primary" onclick="closeScheduleModal()" style="margin-top: 20px;">é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <!-- å‰Šé™¤ãƒ‡ãƒ¼ã‚¿å¾©å…ƒãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="restoreModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background: white; border-radius: 15px; padding: 30px; max-width: 800px; width: 90%; max-height: 80%; overflow-y: auto;">
            <h2 style="color: #6f42c1; margin-bottom: 20px;">â™»ï¸ å‰Šé™¤ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®å¾©å…ƒ</h2>
            <p style="color: #666; margin-bottom: 20px;">éå»3æ—¥é–“ã«å‰Šé™¤ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å¾©å…ƒã§ãã¾ã™</p>
            <div id="restoreContent"></div>
            <button class="btn btn-primary" onclick="closeRestoreModal()" style="margin-top: 20px;">é–‰ã˜ã‚‹</button>
        </div>
    </div>

    <script>
        // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
        const CORRECT_PASSWORD = 'haramika';
        let isLoggedIn = false;

        function handleLogin(event) {
            event.preventDefault();
            const password = document.getElementById('password').value;
            const errorMessage = document.getElementById('errorMessage');
            const loginContainer = document.querySelector('.login-container');
            
            if (password === CORRECT_PASSWORD) {
                isLoggedIn = true;
                // ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('mainScreen').classList.remove('hidden');
                
                // åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆæœŸåŒ–
                loadData();
                renderTable();
                startCountdownTimer();
            } else {
                // ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—
                errorMessage.style.display = 'block';
                loginContainer.classList.add('shake');
                document.getElementById('password').value = '';
                
                // ã‚·ã‚§ã‚¤ã‚¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã«ã‚¯ãƒ©ã‚¹ã‚’é™¤å»
                setTimeout(() => {
                    loginContainer.classList.remove('shake');
                }, 500);
                
                // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’3ç§’å¾Œã«éè¡¨ç¤º
                setTimeout(() => {
                    errorMessage.style.display = 'none';
                }, 3000);
            }
        }

        function logout() {
            if (confirm('ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                isLoggedIn = false;
                document.getElementById('mainScreen').classList.add('hidden');
                document.getElementById('loginScreen').classList.remove('hidden');
                
                // ã‚¿ã‚¤ãƒãƒ¼ã‚’åœæ­¢
                if (countdownInterval) {
                    clearInterval(countdownInterval);
                }
                
                // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
                document.getElementById('password').value = '';
                hideAddForm();
                closeScheduleModal();
                closeRestoreModal();
            }
        }

        // ä»¥ä¸‹ã¯æ—¢å­˜ã®åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®ã‚³ãƒ¼ãƒ‰
        // é£Ÿæã”ã¨ã®æ¶ˆè²»æœŸé™ãƒ‡ãƒ¼ã‚¿ï¼ˆä»•è¾¼ã¿å¾Œãƒ»æ™‚é–“ï¼‰
        const expiryHours = {
            // é‡èœé¡
            "ã‚‚ã‚„ã—": 24,                      // ç—›ã¿ã‚„ã™ã„
            "ãƒ¬ã‚¿ã‚¹": 48,                      // ã‚«ãƒƒãƒˆæ¸ˆã¿
            "ã‚­ãƒ£ãƒ™ãƒ„": 72,                    // ä½¿ã„ã‹ã‘
            
            // ãƒ©ãƒ¼ãƒ¡ãƒ³
            "å‘³å™Œã‚¹ãƒ¼ãƒ—": 72,                  // èª¿ç†æ¸ˆã¿ã‚¹ãƒ¼ãƒ—
            
            // ãŠã¤ã¾ã¿ã€é‰„æ¿
            "è±šã‚¿ãƒ³": 60,                      // 2ã€œ3æ—¥
            "ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼": 72,                // ã‚¹ãƒ©ã‚¤ã‚¹æ¸ˆãƒ»ãƒãƒ¼ã‚·ãƒ§ãƒ³åŒ–
            "ç…®åµï¼ˆæ‚ªé­”ã®å‘³ç‰ï¼‰": 48,          // åŠç†Ÿã‚†ãˆçŸ­ã‚
            "ç„¼ããã°éººï¼ˆå‘³ä»˜ãï¼‰": 36,        // ç‚’ã‚èª¿ç†æ¸ˆã¿
            "ãƒãƒ£ãƒ¼ãƒãƒ³": 36,                  // èª¿å‘³ï¼‹ç‚Šé£¯æ¸ˆã¿
            "é¤ƒå­ï¼ˆé‰„æ¿ç„¼ãé¤ƒå­ï¼‰": 12,        // ç„¼ã„ãŸã‚‰å³æ—¥
            "ã‚¬ãƒ¼ãƒªãƒƒã‚¯ã‚·ãƒ¥ãƒªãƒ³ãƒ—": 24,        // è§£å‡â†’ç‚’ã‚
            "ã‚¤ã‚¤ãƒ€ã‚³": 24,                    // è§£å‡â†’ç‚’ã‚
            "ã‚µãƒ©ãƒ€ç”¨é‡èœ": 36,                // ã‚«ãƒƒãƒˆãƒ¬ã‚¿ã‚¹ãªã©
            "ãƒãƒ†ãƒˆã‚µãƒ©ãƒ€": 48,                // æ‰‹ä½œã‚Šç³»ã¯çŸ­ã‚
            "ã‚‚ã‚„ã—ãƒŠãƒ ãƒ«": 24,                // é«˜æ°´åˆ†ãƒ»å’Œãˆæ¸ˆ
            "ç‰ã“ã‚“é…¢å‘³å™Œ": 60,                // å‘³å™Œã§ã‚‚è¦å†·è”µ
            "ãƒ”ãƒªè¾›ãƒ¡ãƒ³ãƒ": 120,               // èª¿å‘³åŠ å·¥å“
            "æ¢…ã‚¯ãƒ©ã‚²": 168,                   // å’Œãˆæ¸ˆãƒ»å¸‚è²©
            "ãã‚‰ã’åˆºã—": 12                   // è§£å‡ï¼‹ç”Ÿé£Ÿ
        };

        let inventory = [];
        let deletedItems = []; // å‰Šé™¤ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã‚’ä¿å­˜
        let productMasters = []; // å•†å“ãƒã‚¹ã‚¿ãƒ¼æƒ…å ±
        let deletedProductMasters = []; // å‰Šé™¤ã•ã‚ŒãŸå•†å“ãƒã‚¹ã‚¿ãƒ¼
        let editingProductIndex = -1; // ç·¨é›†ä¸­ã®å•†å“ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
        let editingIndex = -1;
        let countdownInterval;

        // åˆæœŸå•†å“ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿
        function initializeProductMasters() {
            productMasters = [
                { name: "è±šã‚¿ãƒ³", hours: 60, servings: 10 },
                { name: "ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼", hours: 72, servings: 15 },
                { name: "ç„¼ããã°éººï¼ˆå‘³ä»˜ãï¼‰", hours: 36, servings: 8 },
                { name: "ã‚¬ãƒ¼ãƒªãƒƒã‚¯ã‚·ãƒ¥ãƒªãƒ³ãƒ—", hours: 24, servings: 6 },
                { name: "ã‚¤ã‚¤ãƒ€ã‚³ã®ãƒã‚¿ãƒ¼é†¤æ²¹", hours: 24, servings: 5 },
                { name: "ãƒãƒ†ãƒˆã‚µãƒ©ãƒ€", hours: 48, servings: 12 },
                { name: "ã‚‚ã‚„ã—ãƒŠãƒ ãƒ«", hours: 24, servings: 8 },
                { name: "ç‰ã“ã‚“é…¢å‘³å™Œ", hours: 60, servings: 10 },
                { name: "ãƒ”ãƒªè¾›ãƒ¡ãƒ³ãƒ", hours: 120, servings: 20 },
                { name: "æ¢…ã‚¯ãƒ©ã‚²", hours: 168, servings: 15 },
                { name: "ãã‚‰ã’åˆºã—", hours: 12, servings: 4 }
            ];
        }

        // ãƒ‡ãƒ¼ã‚¿ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿æ©Ÿèƒ½ï¼ˆãƒ¡ãƒ¢ãƒªå†…ä¿å­˜ï¼‰
        function saveData() {
            // ãƒ¡ãƒ¢ãƒªå†…ã§ã®ä¿å­˜ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã®ã¿æœ‰åŠ¹ï¼‰
            console.log('ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã—ãŸï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­ã®ã¿ï¼‰');
        }

        function loadData() {
            // å•†å“ãƒã‚¹ã‚¿ãƒ¼åˆæœŸåŒ–
            initializeProductMasters();
            
            // åˆå›èµ·å‹•æ™‚ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
            inventory = [
                {
                    name: "ã‚­ãƒ£ãƒ™ãƒ„",
                    quantity: "1000g",
                    prepDate: "2025-06-07T10:00",
                    expiryDate: "2025-06-09T10:00",
                    storageType: "å†·è”µ",
                    location: "å†·è”µåº«1",
                    staff: "å¾Œè—¤",
                    notes: "ä½¿ã„ã‹ã‘ï¼ã‚µãƒ©ãƒ€ç”¨"
                },
                {
                    name: "ã‚‚ã‚„ã—",
                    quantity: "500g",
                    prepDate: "2025-06-06T14:30",
                    expiryDate: "2025-06-07T14:30",
                    storageType: "å†·è”µ",
                    location: "å†·è”µåº«1",
                    staff: "ç«å±±",
                    notes: "ç—›ã¿ã‚„ã™ã„ã®ã§æ³¨æ„"
                },
                {
                    name: "ãƒãƒ£ãƒ¼ã‚·ãƒ¥ãƒ¼",
                    quantity: "1500g",
                    prepDate: "2025-06-05T09:00",
                    expiryDate: "2025-06-08T09:00",
                    storageType: "å†·è”µ",
                    location: "å†·è”µåº«ï¼ˆå€‰åº«ï¼‰",
                    staff: "åŸ",
                    notes: "ã‚¹ãƒ©ã‚¤ã‚¹æ¸ˆã¿"
                }
            ];
        }

        // å‰Šé™¤ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ãƒ»å¾©å…ƒæ©Ÿèƒ½ï¼ˆãƒ¡ãƒ¢ãƒªå†…ï¼‰
        function saveDeletedItem(item) {
            const deletedItem = {
                ...item,
                deletedAt: new Date().toISOString(),
                id: Date.now() + Math.random() // ãƒ¦ãƒ‹ãƒ¼ã‚¯ID
            };
            deletedItems.push(deletedItem);
            
            // 3æ—¥é–“ã‚ˆã‚Šå¤ã„ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤
            const threeDaysAgo = new Date();
            threeDaysAgo.setDate(threeDaysAgo.getDate() - 3);
            deletedItems = deletedItems.filter(item => 
                new Date(item.deletedAt) > threeDaysAgo
            );
        }

        function getDeletedItems() {
            // 3æ—¥é–“ä»¥å†…ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿è¿”ã™
            const threeDaysAgo = new Date();
            threeDaysAgo.setDate(threeDaysAgo.getDate() - 3);
            return deletedItems.filter(item => new Date(item.deletedAt) > threeDaysAgo);
        }

        function restoreItem(deletedItem) {
            // å‰Šé™¤ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã‹ã‚‰å¾©å…ƒç”¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
            const restoredItem = {
                name: deletedItem.name,
                quantity: deletedItem.quantity,
                prepDate: deletedItem.prepDate,
                expiryDate: deletedItem.expiryDate,
                storageType: deletedItem.storageType,
                location: deletedItem.location,
                staff: deletedItem.staff,
                notes: deletedItem.notes
            };
            
            inventory.push(restoredItem);
            renderTable();
            
            // å¾©å…ƒã—ãŸã‚¢ã‚¤ãƒ†ãƒ ã‚’å‰Šé™¤ãƒªã‚¹ãƒˆã‹ã‚‰é™¤å»
            deletedItems = deletedItems.filter(item => item.id !== deletedItem.id);
        }

        function roundUpTo30Minutes(date) {
            const minutes = date.getMinutes();
            if (minutes === 0 || minutes === 30) {
                // ã™ã§ã«30åˆ†åˆ»ã¿ã®å ´åˆã¯ãã®ã¾ã¾
                return date;
            }
            const roundedMinutes = minutes <= 30 ? 30 : 60;
            const newDate = new Date(date);
            newDate.setMinutes(roundedMinutes);
            newDate.setSeconds(0);
            newDate.setMilliseconds(0);
            
            // 60åˆ†ã®å ´åˆã¯æ¬¡ã®æ™‚é–“ã®00åˆ†ã«ã™ã‚‹
            if (roundedMinutes === 60) {
                newDate.setHours(newDate.getHours() + 1);
                newDate.setMinutes(0);
            }
            
            return newDate;
        }

        function formatDateTime(dateString) {
            const date = new Date(dateString);
            return date.toLocaleString('ja-JP', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                timeZone: 'Asia/Tokyo'
            });
        }

        function calculateExpiry() {
            const itemName = document.getElementById('itemName').value;
            const prepDateInput = document.getElementById('prepDate');
            const expiryDateInput = document.getElementById('expiryDate');
            
            if (!itemName || !prepDateInput.value) {
                expiryDateInput.value = '';
                return;
            }
            
            const hours = expiryHours[itemName] || 72; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ72æ™‚é–“
            
            const prepDate = new Date(prepDateInput.value);
            const expiryDate = new Date(prepDate.getTime() + (hours * 60 * 60 * 1000));
            
            // ãƒ­ãƒ¼ã‚«ãƒ«æ™‚åˆ»ã¨ã—ã¦æ–‡å­—åˆ—ã‚’ä½œæˆï¼ˆtoISOStringã¯UTCãªã®ã§ä½¿ã‚ãªã„ï¼‰
            const year = expiryDate.getFullYear();
            const month = String(expiryDate.getMonth() + 1).padStart(2, '0');
            const day = String(expiryDate.getDate()).padStart(2, '0');
            const hour = String(expiryDate.getHours()).padStart(2, '0');
            const minute = String(expiryDate.getMinutes()).padStart(2, '0');
            
            const localTimeString = `${year}-${month}-${day}T${hour}:${minute}`;
            expiryDateInput.value = localTimeString;
        }

        function setCurrentTime() {
            // ç¾åœ¨ã®ãƒ­ãƒ¼ã‚«ãƒ«æ™‚åˆ»ã‚’ãã®ã¾ã¾ä½¿ç”¨
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            
            const timeString = `${year}-${month}-${day}T${hours}:${minutes}`;
            document.getElementById('prepDate').value = timeString;
            calculateExpiry(); // æ™‚åˆ»è¨­å®šå¾Œã«è‡ªå‹•ã§è³å‘³æœŸé™ã‚’è¨ˆç®—
        }

        function getTimeUntilExpiry(expiryDate) {
            const now = new Date();
            const expiry = new Date(expiryDate);
            const diffTime = expiry - now;
            
            if (diffTime <= 0) {
                return { expired: true, text: "æœŸé™åˆ‡ã‚Œ" };
            }
            
            const totalSeconds = Math.floor(diffTime / 1000);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            
            if (hours < 24) {
                const hoursStr = String(hours).padStart(2, '0');
                const minutesStr = String(minutes).padStart(2, '0');
                const secondsStr = String(seconds).padStart(2, '0');
                return { 
                    urgent: true, 
                    text: `æ®‹ã‚Š${hoursStr}:${minutesStr}:${secondsStr}`,
                    totalSeconds: totalSeconds
                };
            }
            
            const days = Math.floor(hours / 24);
            const remainingHours = hours % 24;
            
            if (days === 0) {
                return { text: `${remainingHours}æ™‚é–“` };
            } else if (days === 1) {
                return { warning: true, text: `${days}æ—¥${remainingHours}æ™‚é–“` };
            } else {
                return { text: `${days}æ—¥${remainingHours}æ™‚é–“` };
            }
        }

        function getStatusClass(expiryDate) {
            const timeInfo = getTimeUntilExpiry(expiryDate);
            if (timeInfo.expired) return 'expired';
            if (timeInfo.urgent) return 'countdown';
            if (timeInfo.warning) return 'warning';
            return '';
        }

        function getStorageBadge(storageType) {
            const badges = {
                'å†·è”µ': 'status-refrigerated',
                'å¸¸æ¸©': 'status-room'
            };
            return `<span class="status-badge ${badges[storageType] || ''}">${storageType}</span>`;
        }

        function renderTable() {
            if (!isLoggedIn) return; // ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ãªã„å ´åˆã¯ä½•ã‚‚ã—ãªã„
            
            const tbody = document.getElementById('inventoryBody');
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            const sortOption = document.getElementById('sortOptions').value;
            
            let filteredInventory = inventory.filter(item => 
                item.name.toLowerCase().includes(searchTerm) ||
                item.notes.toLowerCase().includes(searchTerm)
            );

            // ä¸¦ã³æ›¿ãˆå‡¦ç†
            if (sortOption === 'prepDate') {
                filteredInventory.sort((a, b) => new Date(a.prepDate) - new Date(b.prepDate));
            } else if (sortOption === 'expiryDate') {
                filteredInventory.sort((a, b) => new Date(a.expiryDate) - new Date(b.expiryDate));
            }

            tbody.innerHTML = '';
            filteredInventory.forEach((item, index) => {
                const timeInfo = getTimeUntilExpiry(item.expiryDate);
                const statusClass = getStatusClass(item.expiryDate);
                const originalIndex = inventory.indexOf(item);
                const row = document.createElement('tr');
                
                let expiryDisplay = formatDateTime(item.expiryDate);
                if (timeInfo.urgent || timeInfo.expired) {
                    expiryDisplay += `<br><span class="${statusClass}">${timeInfo.text}</span>`;
                }
                
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>${formatDateTime(item.prepDate)}</td>
                    <td>${expiryDisplay}</td>
                    <td>${getStorageBadge(item.storageType)}</td>
                    <td>${item.location}</td>
                    <td>${item.staff}</td>
                    <td>${item.notes}</td>
                    <td>
                        <button class="action-btn edit-btn" onclick="editItem(${originalIndex})">ç·¨é›†</button>
                        <button class="action-btn delete-btn" onclick="deleteItem(${originalIndex})">å‰Šé™¤</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            updateStats();
        }

        function updateStats() {
            if (!isLoggedIn) return;
            
            const total = inventory.length;
            const expired = inventory.filter(item => getTimeUntilExpiry(item.expiryDate).expired).length;
            const urgent = inventory.filter(item => getTimeUntilExpiry(item.expiryDate).urgent).length;

            document.getElementById('totalItems').textContent = total;
            document.getElementById('expiredItems').textContent = expired;
            document.getElementById('urgentItems').textContent = urgent;
        }

        function showAddForm() {
            document.getElementById('addForm').style.display = 'block';
            // å…¥è·æ—¥æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç©ºã«ã™ã‚‹
            document.getElementById('prepDate').value = '';
            document.getElementById('expiryDate').value = '';
        }

        function hideAddForm() {
            document.getElementById('addForm').style.display = 'none';
            clearForm();
            editingIndex = -1;
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.textContent = 'âœ… è¿½åŠ ';
            submitBtn.onclick = addItem;
        }

        function clearForm() {
            document.getElementById('itemName').value = '';
            document.getElementById('quantity').value = '';
            document.getElementById('prepDate').value = '';
            document.getElementById('expiryDate').value = '';
            document.getElementById('storageType').value = 'å†·è”µ';
            document.getElementById('location').value = 'å†·è”µåº«1';
            document.getElementById('staff').value = '';
            document.getElementById('notes').value = '';
        }

        function addItem() {
            const newItem = {
                name: document.getElementById('itemName').value,
                quantity: document.getElementById('quantity').value,
                prepDate: document.getElementById('prepDate').value,
                expiryDate: document.getElementById('expiryDate').value,
                storageType: document.getElementById('storageType').value,
                location: document.getElementById('location').value,
                staff: document.getElementById('staff').value,
                notes: document.getElementById('notes').value
            };

            if (!newItem.name || !newItem.quantity || !newItem.staff) {
                alert('é£Ÿæåã€æ•°é‡ã€æ‹…å½“è€…ã¯å¿…é ˆé …ç›®ã§ã™ã€‚');
                return;
            }

            if (editingIndex >= 0) {
                inventory[editingIndex] = newItem;
            } else {
                inventory.push(newItem);
            }
            
            saveData(); // ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
            renderTable();
            hideAddForm();
        }

        function deleteItem(index) {
            if (confirm('ã“ã®é£Ÿæã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                const deletedItem = inventory[index];
                saveDeletedItem(deletedItem); // å‰Šé™¤ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
                inventory.splice(index, 1);
                saveData(); // ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
                renderTable();
            }
        }

        function editItem(index) {
            const item = inventory[index];
            editingIndex = index;
            
            document.getElementById('itemName').value = item.name;
            document.getElementById('quantity').value = item.quantity;
            document.getElementById('prepDate').value = item.prepDate;
            document.getElementById('expiryDate').value = item.expiryDate;
            document.getElementById('storageType').value = item.storageType;
            document.getElementById('location').value = item.location;
            document.getElementById('staff').value = item.staff;
            document.getElementById('notes').value = item.notes;
            
            showAddForm();
            
            const submitBtn = document.getElementById('submitBtn');
            submitBtn.textContent = 'âœ… æ›´æ–°';
            submitBtn.onclick = addItem;
        }

        function clearExpired() {
            if (confirm('æœŸé™åˆ‡ã‚Œã®é£Ÿæã‚’ã™ã¹ã¦å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                const expiredItems = inventory.filter(item => getTimeUntilExpiry(item.expiryDate).expired);
                
                // å‰Šé™¤ã•ã‚Œã‚‹å„ã‚¢ã‚¤ãƒ†ãƒ ã‚’ä¿å­˜
                expiredItems.forEach(item => saveDeletedItem(item));
                
                inventory = inventory.filter(item => !getTimeUntilExpiry(item.expiryDate).expired);
                saveData(); // ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
                renderTable();
            }
        }

        // å¾©å…ƒãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£
        function showRestoreModal() {
            const deletedItems = getDeletedItems();
            let content = '';
            
            if (deletedItems.length === 0) {
                content = '<p style="text-align: center; color: #666; padding: 40px;">å¾©å…ƒå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“</p>';
            } else {
                content = '<div style="max-height: 400px; overflow-y: auto;">';
                
                // å‰Šé™¤æ—¥æ™‚ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
                const groupedByDate = {};
                deletedItems.forEach(item => {
                    const deleteDate = new Date(item.deletedAt).toLocaleDateString('ja-JP');
                    if (!groupedByDate[deleteDate]) {
                        groupedByDate[deleteDate] = [];
                    }
                    groupedByDate[deleteDate].push(item);
                });
                
                Object.keys(groupedByDate).sort().reverse().forEach(date => {
                    content += `<h4 style="color: #6f42c1; margin: 20px 0 10px 0; border-bottom: 1px solid #eee; padding-bottom: 5px;">${date}ã«å‰Šé™¤</h4>`;
                    
                    groupedByDate[date].forEach(item => {
                        const deleteTime = new Date(item.deletedAt).toLocaleTimeString('ja-JP', {hour: '2-digit', minute: '2-digit'});
                        const timeInfo = getTimeUntilExpiry(item.expiryDate);
                        let statusText = '';
                        let statusColor = '#666';
                        
                        if (timeInfo.expired) {
                            statusText = 'æœŸé™åˆ‡ã‚Œ';
                            statusColor = '#dc3545';
                        } else if (timeInfo.urgent) {
                            statusText = timeInfo.text;
                            statusColor = '#dc3545';
                        } else if (timeInfo.warning) {
                            statusText = timeInfo.text;
                            statusColor = '#fd7e14';
                        } else {
                            statusText = timeInfo.text;
                        }
                        
                        content += `
                            <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 10px; border-left: 4px solid #6f42c1;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <h5 style="margin: 0; color: #2c3e50;">${item.name} (${item.quantity})</h5>
                                    <button class="btn" onclick="restoreItem({id: '${item.id}', name: '${item.name}', quantity: '${item.quantity}', prepDate: '${item.prepDate}', expiryDate: '${item.expiryDate}', storageType: '${item.storageType}', location: '${item.location}', staff: '${item.staff}', notes: '${item.notes}'}); closeRestoreModal();" 
                                            style="background: #28a745; color: white; font-size: 12px; padding: 6px 12px;">å¾©å…ƒ</button>
                                </div>
                                <div style="font-size: 12px; color: #666;">
                                    <span>å‰Šé™¤æ™‚åˆ»: ${deleteTime}</span> | 
                                    <span>æ‹…å½“è€…: ${item.staff}</span> | 
                                    <span>ä¿å­˜å ´æ‰€: ${item.location}</span>
                                </div>
                                <div style="font-size: 12px; margin-top: 4px;">
                                    <span>è³å‘³æœŸé™: ${formatDateTime(item.expiryDate)}</span>
                                    <span style="color: ${statusColor}; font-weight: bold; margin-left: 10px;">(${statusText})</span>
                                </div>
                                ${item.notes ? `<div style="font-size: 12px; color: #888; margin-top: 4px;">å‚™è€ƒ: ${item.notes}</div>` : ''}
                            </div>
                        `;
                    });
                });
                
                content += '</div>';
            }
            
            document.getElementById('restoreContent').innerHTML = content;
            document.getElementById('restoreModal').style.display = 'flex';
        }

        function closeRestoreModal() {
            document.getElementById('restoreModal').style.display = 'none';
        }

        // ä»•è¾¼ã¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†æ©Ÿèƒ½
        function addOrUpdateProductMaster() {
            const name = document.getElementById('newProductName').value.trim();
            const hours = parseInt(document.getElementById('newProductHours').value);
            const servings = parseInt(document.getElementById('newProductServings').value);
            
            if (!name || !hours || !servings || hours < 1 || servings < 1) {
                alert('å•†å“åã€æ¶ˆè²»æœŸé™ã€äººæ•°ã‚’ã™ã¹ã¦æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            if (editingProductIndex >= 0) {
                // ç·¨é›†ãƒ¢ãƒ¼ãƒ‰
                productMasters[editingProductIndex] = { name, hours, servings };
                cancelProductEdit();
            } else {
                // è¿½åŠ ãƒ¢ãƒ¼ãƒ‰
                // é‡è¤‡ãƒã‚§ãƒƒã‚¯
                if (productMasters.find(product => product.name === name)) {
                    alert('ã“ã®å•†å“ã¯æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™');
                    return;
                }
                productMasters.push({ name, hours, servings });
            }
            
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductHours').value = '';
            document.getElementById('newProductServings').value = '';
            
            renderProductMasterList();
            updateScheduleDisplay();
        }

        function editProductMaster(index) {
            const product = productMasters[index];
            editingProductIndex = index;
            
            document.getElementById('newProductName').value = product.name;
            document.getElementById('newProductHours').value = product.hours;
            document.getElementById('newProductServings').value = product.servings;
            
            document.getElementById('productMasterBtn').textContent = 'æ›´æ–°';
            document.getElementById('productMasterBtn').style.background = '#ffc107';
            document.getElementById('cancelEditBtn').style.display = 'inline-block';
        }

        function cancelProductEdit() {
            editingProductIndex = -1;
            document.getElementById('newProductName').value = '';
            document.getElementById('newProductHours').value = '';
            document.getElementById('newProductServings').value = '';
            
            document.getElementById('productMasterBtn').textContent = 'è¿½åŠ ';
            document.getElementById('productMasterBtn').style.background = '#28a745';
            document.getElementById('cancelEditBtn').style.display = 'none';
        }

        function removeProductMaster(index) {
            if (confirm('ã“ã®å•†å“ã‚’ãƒã‚¹ã‚¿ãƒ¼ã‹ã‚‰å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                const deletedProduct = productMasters[index];
                deletedProduct.deletedAt = new Date().toISOString();
                deletedProductMasters.push(deletedProduct);
                
                productMasters.splice(index, 1);
                renderProductMasterList();
                updateScheduleDisplay();
            }
        }

        function showDeletedProducts() {
            if (deletedProductMasters.length === 0) {
                alert('å‰Šé™¤ã•ã‚ŒãŸå•†å“ã¯ã‚ã‚Šã¾ã›ã‚“');
                return;
            }
            
            let message = 'å‰Šé™¤ã•ã‚ŒãŸå•†å“ä¸€è¦§:\n\n';
            deletedProductMasters.forEach((product, index) => {
                const deleteDate = new Date(product.deletedAt).toLocaleString('ja-JP');
                message += `${index + 1}. ${product.name} (${product.hours}æ™‚é–“, ${product.servings}äººåˆ†) - å‰Šé™¤: ${deleteDate}\n`;
            });
            message += '\nå¾©å…ƒã—ãŸã„å•†å“ã®ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆè¤‡æ•°é¸æŠã¯ã€Œ1,3,5ã€ã®ã‚ˆã†ã«ï¼‰:';
            
            const input = prompt(message);
            if (input) {
                const indices = input.split(',').map(i => parseInt(i.trim()) - 1);
                restoreProducts(indices);
            }
        }

        function restoreProducts(indices) {
            const restored = [];
            indices.forEach(index => {
                if (index >= 0 && index < deletedProductMasters.length) {
                    const product = deletedProductMasters[index];
                    
                    // é‡è¤‡ãƒã‚§ãƒƒã‚¯
                    if (!productMasters.find(p => p.name === product.name)) {
                        const restoredProduct = {
                            name: product.name,
                            hours: product.hours,
                            servings: product.servings
                        };
                        productMasters.push(restoredProduct);
                        restored.push(product.name);
                    }
                }
            });
            
            // å¾©å…ƒã—ãŸå•†å“ã‚’å‰Šé™¤ãƒªã‚¹ãƒˆã‹ã‚‰é™¤å»
            indices.sort((a, b) => b - a).forEach(index => {
                if (index >= 0 && index < deletedProductMasters.length) {
                    deletedProductMasters.splice(index, 1);
                }
            });
            
            if (restored.length > 0) {
                alert(`ä»¥ä¸‹ã®å•†å“ã‚’å¾©å…ƒã—ã¾ã—ãŸ:\n${restored.join('\n')}`);
                renderProductMasterList();
                updateScheduleDisplay();
            } else {
                alert('å¾©å…ƒã§ãã‚‹å•†å“ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ');
            }
        }

        function renderProductMasterList() {
            const container = document.getElementById('productMasterList');
            let html = '';
            
            productMasters.forEach((product, index) => {
                html += `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: white; border-radius: 4px; margin-bottom: 5px;">
                        <div>
                            <strong>${product.name}</strong>
                            <div style="font-size: 12px; color: #666;">
                                æ¶ˆè²»æœŸé™: ${product.hours}æ™‚é–“ | äººæ•°: ${product.servings}äººåˆ†
                            </div>
                        </div>
                        <div style="display: flex; gap: 5px;">
                            <button onclick="editProductMaster(${index})" style="background: #ffc107; color: #212529; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">ç·¨é›†</button>
                            <button onclick="removeProductMaster(${index})" style="background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">å‰Šé™¤</button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html || '<p style="text-align: center; color: #666;">å•†å“ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>';
        }

        function calculatePrepSchedule() {
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const tomorrow = new Date(today.getTime() + (24 * 60 * 60 * 1000));
            const schedules = [];
            
            // ç¾åœ¨ã®åœ¨åº«ã‹ã‚‰æ¬¡å›ä»•è¾¼ã¿ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¨ˆç®—
            inventory.forEach(item => {
                const productMaster = productMasters.find(p => p.name === item.name);
                if (productMaster) {
                    const expiryDate = new Date(item.expiryDate);
                    const prepTime = new Date(expiryDate.getTime() - (24 * 60 * 60 * 1000)); // æœŸé™ã®24æ™‚é–“å‰
                    
                    let urgencyLevel = 4; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šãã‚Œä»¥é™
                    let urgencyText = 'äºˆå®š';
                    
                    if (prepTime <= today) {
                        urgencyLevel = 2; // æœ¬æ—¥ä»•è¾¼ã¿
                        urgencyText = 'æœ¬æ—¥ä»•è¾¼ã¿';
                    } else if (prepTime <= tomorrow) {
                        urgencyLevel = 3; // æ˜æ—¥ã®ä»•è¾¼ã¿
                        urgencyText = 'æ˜æ—¥ä»•è¾¼ã¿';
                    }
                    
                    schedules.push({
                        name: item.name,
                        currentExpiry: expiryDate,
                        nextPrepTime: prepTime,
                        hours: productMaster.hours,
                        urgencyLevel: urgencyLevel,
                        urgencyText: urgencyText,
                        isUpcoming: prepTime <= new Date(now.getTime() + (48 * 60 * 60 * 1000)) && prepTime > new Date(now.getTime() - (24 * 60 * 60 * 1000)),
                        isOverdue: prepTime < today
                    });
                }
            });
            
            // åœ¨åº«ã«ãªã„å•†å“ã§ãƒã‚¹ã‚¿ãƒ¼ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚‚è¿½åŠ ï¼ˆæœ€å„ªå…ˆï¼‰
            productMasters.forEach(master => {
                if (!inventory.find(item => item.name === master.name)) {
                    schedules.push({
                        name: master.name,
                        currentExpiry: null,
                        nextPrepTime: new Date(now.getTime() + (master.hours * 60 * 60 * 1000)),
                        hours: master.hours,
                        urgencyLevel: 1, // åœ¨åº«ãªã—ï¼ˆæœ€å„ªå…ˆï¼‰
                        urgencyText: 'åœ¨åº«ãªã—',
                        isUpcoming: true,
                        isOverdue: false,
                        noStock: true
                    });
                }
            });
            
            // ç·Šæ€¥åº¦é †ã«ä¸¦ã³æ›¿ãˆ
            return schedules.sort((a, b) => {
                // ç·Šæ€¥åº¦ãƒ¬ãƒ™ãƒ«ã§æœ€åˆã«ä¸¦ã³æ›¿ãˆ
                if (a.urgencyLevel !== b.urgencyLevel) {
                    return a.urgencyLevel - b.urgencyLevel;
                }
                
                // åŒã˜ç·Šæ€¥åº¦ã®å ´åˆã®ä¸¦ã³æ›¿ãˆ
                if (a.urgencyLevel === 1) {
                    // åœ¨åº«ãªã—ã®å ´åˆã¯æ¶ˆè²»æœŸé™ã®çŸ­ã„é †ï¼ˆç·Šæ€¥åº¦é«˜ã„é †ï¼‰
                    return a.hours - b.hours;
                } else if (a.urgencyLevel === 4) {
                    // ãã‚Œä»¥é™ã®å ´åˆã¯æ¶ˆè²»æœŸé™ã®çŸ­ã„é †
                    return a.hours - b.hours;
                } else {
                    // æœ¬æ—¥ãƒ»æ˜æ—¥ä»•è¾¼ã¿ã®å ´åˆã¯ç¾åœ¨ã®æœŸé™ãŒè¿‘ã„é †
                    return a.currentExpiry - b.currentExpiry;
                }
            });
        }

        function updateScheduleDisplay() {
            const schedules = calculatePrepSchedule();
            
            // ãã‚ãã‚ä»•è¾¼ã‚€ãƒªã‚¹ãƒˆï¼ˆç·Šæ€¥åº¦é«˜ã„ã‚‚ã®ã‚’è¡¨ç¤ºï¼‰
            const upcomingContainer = document.getElementById('upcomingSchedule');
            const urgent = schedules.filter(s => s.urgencyLevel <= 3); // åœ¨åº«ãªã—ã€æœ¬æ—¥ã€æ˜æ—¥
            
            if (urgent.length === 0) {
                upcomingContainer.innerHTML = '<p style="text-align: center; color: #666;">ç¾åœ¨ã€ç·Šæ€¥ã®ä»•è¾¼ã¿äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“</p>';
            } else {
                let upcomingHtml = '';
                urgent.forEach(schedule => {
                    let urgencyStyle = '';
                    let urgencyIcon = '';
                    
                    switch(schedule.urgencyLevel) {
                        case 1: // åœ¨åº«ãªã—
                            urgencyStyle = 'background: #f8d7da; border-left: 4px solid #dc3545;';
                            urgencyIcon = 'ğŸš¨';
                            break;
                        case 2: // æœ¬æ—¥ä»•è¾¼ã¿
                            urgencyStyle = 'background: #fff3cd; border-left: 4px solid #ffc107;';
                            urgencyIcon = 'â°';
                            break;
                        case 3: // æ˜æ—¥ä»•è¾¼ã¿
                            urgencyStyle = 'background: #d1ecf1; border-left: 4px solid #17a2b8;';
                            urgencyIcon = 'ğŸ“…';
                            break;
                    }
                    
                    upcomingHtml += `
                        <div style="${urgencyStyle} padding: 12px; border-radius: 6px; margin-bottom: 8px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <strong>${schedule.name}</strong>
                                <span style="font-size: 12px; font-weight: bold;">${urgencyIcon} ${schedule.urgencyText}</span>
                            </div>
                            <div style="font-size: 12px; color: #666; margin-top: 4px;">
                                ${schedule.noStock ? 'ã™ãã«ä»•è¾¼ã¿é–‹å§‹æ¨å¥¨' : `æ¨å¥¨ä»•è¾¼ã¿æ™‚åˆ»: ${formatDateTime(schedule.nextPrepTime.toISOString())}`}
                            </div>
                            <div style="font-size: 12px; color: #666;">
                                æ¶ˆè²»æœŸé™: ${schedule.hours}æ™‚é–“ | äººæ•°: ${productMasters.find(p => p.name === schedule.name)?.servings || 'æœªè¨­å®š'}äººåˆ†
                                ${!schedule.noStock ? ` | ç¾åœ¨æœŸé™: ${formatDateTime(schedule.currentExpiry.toISOString())}` : ''}
                            </div>
                        </div>
                    `;
                });
                upcomingContainer.innerHTML = upcomingHtml;
            }
            
            // å…¨ä½“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆç·Šæ€¥åº¦é †ï¼‰
            const fullContainer = document.getElementById('fullSchedule');
            if (schedules.length === 0) {
                fullContainer.innerHTML = '<p style="text-align: center; color: #666;">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“</p>';
            } else {
                let fullHtml = '';
                schedules.forEach(schedule => {
                    let statusColor = '';
                    let urgencyIcon = '';
                    
                    switch(schedule.urgencyLevel) {
                        case 1:
                            statusColor = '#dc3545';
                            urgencyIcon = 'ğŸš¨';
                            break;
                        case 2:
                            statusColor = '#ffc107';
                            urgencyIcon = 'â°';
                            break;
                        case 3:
                            statusColor = '#17a2b8';
                            urgencyIcon = 'ğŸ“…';
                            break;
                        default:
                            statusColor = '#28a745';
                            urgencyIcon = 'ğŸ“‹';
                    }
                    
                    fullHtml += `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: white; border-radius: 6px; margin-bottom: 6px; border-left: 4px solid ${statusColor};">
                            <div>
                                <strong>${schedule.name}</strong>
                                <div style="font-size: 12px; color: #666;">
                                    ${schedule.noStock ? 'åœ¨åº«ãªã—' : `ç¾åœ¨æœŸé™: ${formatDateTime(schedule.currentExpiry.toISOString())}`}
                                </div>
                                <div style="font-size: 12px; color: #666;">
                                    æ¶ˆè²»æœŸé™: ${schedule.hours}æ™‚é–“ | äººæ•°: ${productMasters.find(p => p.name === schedule.name)?.servings || 'æœªè¨­å®š'}äººåˆ†
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 12px; color: ${statusColor}; font-weight: bold;">${urgencyIcon} ${schedule.urgencyText}</div>
                                <div style="font-size: 12px; color: #666;">
                                    ${schedule.noStock ? 'ã™ãã«é–‹å§‹' : formatDateTime(schedule.nextPrepTime.toISOString())}
                                </div>
                            </div>
                        </div>
                    `;
                });
                fullContainer.innerHTML = fullHtml;
            }
        }

        function showScheduleModal() {
            renderProductMasterList();
            updateScheduleDisplay();
            document.getElementById('scheduleModal').style.display = 'flex';
        }

        function closeScheduleModal() {
            document.getElementById('scheduleModal').style.display = 'none';
        }

        function exportToCSV() {
            const headers = ['é£Ÿæå', 'æ•°é‡', 'å…¥è·ã€ä»•è¾¼ã¿æ—¥æ™‚', 'è³å‘³æœŸé™', 'ä¿å­˜æ–¹æ³•', 'ä¿å­˜å ´æ‰€', 'æ‹…å½“è€…', 'å‚™è€ƒ'];
            const csvContent = [
                headers.join(','),
                ...inventory.map(item => [
                    item.name,
                    item.quantity,
                    formatDateTime(item.prepDate),
                    formatDateTime(item.expiryDate),
                    item.storageType,
                    item.location,
                    item.staff,
                    item.notes
                ].join(','))
            ].join('\n');

            const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'ç¥ã®æ‰‹_åœ¨åº«ç®¡ç†_' + new Date().toISOString().split('T')[0] + '.csv';
            link.click();
        }

        function startCountdownTimer() {
            countdownInterval = setInterval(() => {
                renderTable();
            }, 1000);
        }

        // æ¤œç´¢æ©Ÿèƒ½
        document.getElementById('searchBox').addEventListener('input', renderTable);

        // Enterã‚­ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³
        document.getElementById('password').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleLogin(e);
            }
        });

        // åˆæœŸè¡¨ç¤º
        document.addEventListener('DOMContentLoaded', function() {
            // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã¯ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã‚’è¡¨ç¤º
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainScreen').classList.add('hidden');
        });
    </script>
</body>
</html>
            
